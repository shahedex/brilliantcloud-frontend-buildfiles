(this.webpackJsonpcloud_frontend=this.webpackJsonpcloud_frontend||[]).push([[0],{109:function(e,t,a){e.exports=a(156)},114:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(22),r=a.n(l),i=(a(114),a(115),a(116),a(117),a(9)),s=a(10),c=a(12),u=a(11),m=a(13),h=a(3),d=a(164),p=a(42),v=a(32),g=a(27),f=a(6),E=a.n(f),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dashboardView:a.props.dashboardView,showButtons:!1},a.handleDrawer=a.handleDrawer.bind(Object(h.a)(a)),a.signOut=a.signOut.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.dashboardView?this.setState({showButtons:!1}):this.setState({showButtons:!0})}},{key:"signOut",value:function(){var e={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};E.a.post("/auth/logout","",e).then((function(e){localStorage.removeItem("auth_token"),console.log("logged out"),window.location.reload()})).catch((function(e){console.log(e)}))}},{key:"handleDrawer",value:function(e){this.props.showDrawer(e.target)}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.showButtons?o.a.createElement(d.a,null,o.a.createElement(d.a.Group,{align:p.a.LEFT},o.a.createElement(d.a.Heading,null,o.a.createElement(g.b,{to:"/"},o.a.createElement(v.b,{minimal:!0,icon:"cloud",text:"Brilliant Cloud Platform"}))),o.a.createElement(d.a.Divider,null)),o.a.createElement(d.a.Group,{align:p.a.RIGHT},o.a.createElement(g.b,{to:"/signin"},o.a.createElement(v.b,{intent:"primary",icon:"log-in",text:"Sign In"})),o.a.createElement(d.a.Divider,null),o.a.createElement(g.b,{to:"/signup"},o.a.createElement(v.b,{intent:"primary",icon:"new-person",text:"Sign Up"})))):o.a.createElement(d.a,null,o.a.createElement(d.a.Group,{align:p.a.LEFT},o.a.createElement(v.b,{onClick:this.handleDrawer,minimal:!0,icon:"menu"}),o.a.createElement(d.a.Divider,null),o.a.createElement(d.a.Heading,null,"Brilliant Cloud Dashboard"),o.a.createElement(d.a.Divider,null)),o.a.createElement(d.a.Group,{align:p.a.RIGHT},o.a.createElement(v.b,{onClick:this.signOut,minimal:!0,icon:"log-out",text:"Sign Out"}))))}}]),t}(n.Component),w=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!1,showDrawer:!1}))}}]),t}(n.Component),D=a(41),k=a(46),y=a.n(k);function j(){try{var e=new Date,t=Math.floor(e.getTime()/1e3);return!(parseInt(y()(localStorage.getItem("auth_token")).exp)<t)||(localStorage.removeItem("auth_token"),!1)}catch(a){return console.log("Token not found"),localStorage.removeItem("auth_token"),!1}}var _=a(158),S=a(15),O=a(88),I=a(103),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isShow:!0},a.handleShowDrawer=a.handleShowDrawer.bind(Object(h.a)(a)),a.handleCloseDrawer=a.handleCloseDrawer.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleShowDrawer",value:function(){this.setState({isShow:!0})}},{key:"handleCloseDrawer",value:function(){this.props.handleHideDrawer(),this.setState({isShow:!1})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(_.a,{title:"Menus",isOpen:this.state.isShow,onClose:this.handleCloseDrawer,position:S.a.LEFT,size:"15%",usePortal:!0},o.a.createElement("div",{className:_.a.DRAWER_BODY},o.a.createElement(O.a,{large:!0},o.a.createElement(I.a,{icon:"desktop",text:"Compute"},o.a.createElement(I.a,{text:"Overview",href:"/dashboard/overview"}),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{text:"Instances",href:"/dashboard/instances"}),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{text:"Images"}),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{text:"Key Pairs"})),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{icon:"database",text:"Volumes"},o.a.createElement(I.a,{text:"Volumes"}),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{text:"Snapshots"})),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{icon:"ip-address",text:"Network"},o.a.createElement(I.a,{text:"Networks"}),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{text:"Floating IPs"})),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{icon:"shield",text:"Identity"},o.a.createElement(I.a,{text:"Users",href:"/dashboard/identity/users"}),o.a.createElement(O.a.Divider,null),o.a.createElement(I.a,{text:"Roles",href:"/dashboard/identity/roles"}))))))}}]),t}(n.Component),T=a(159),C=a(31),V=a(87),R=a(8),B=a(45),F=(a(152),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={overview_data:{},isFetching:!1},a.getOverview=a.getOverview.bind(Object(h.a)(a)),a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authenticateToken().then((function(t){console.log("got authenticated"),e.getOverview().then((function(t){e.setState({isFetching:!1}),console.log("got the overview")}))}))}},{key:"getOverview",value:function(){var e=this,t={scopedToken:this.state.scopedToken,projectID:this.state.projectID};return E.a.post("/api/v1/vm-service/get-overview",t).then((function(t){var a=t.data;e.setState({overview_data:a}),e.setState({core_max_val:a.cores.limit}),e.setState({core_in_use:a.cores.in_use}),e.setState({ram_max_val:a.ram.limit}),e.setState({ram_in_use:a.ram.in_use}),e.setState({instances_max_val:a.instances.limit}),e.setState({instances_in_use:a.instances.in_use}),e.setState({keypairs_max_val:a.key_pairs.limit}),e.setState({keypairs_in_use:a.key_pairs.in_use}),e.setState({floatingip_max_val:a.floating_ips.limit}),e.setState({floatingip_in_use:a.floating_ips.in_use}),e.setState({securitygroup_max_val:a.security_groups.limit}),e.setState({securitygroup_in_use:a.security_groups.in_use}),console.log(a)})).catch((function(e){console.log(e)}))}},{key:"authenticateToken",value:function(){var e=this;this.setState({isFetching:!0});var t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{paddingLeft:"10px",paddingTop:"10px",paddingBottom:"10px",paddingRight:"10px",boxSizing:"content-box"}},o.a.createElement(R.Row,null,o.a.createElement(R.Col,{xs:!0},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("p",null,"Instances"),this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.Row,null,o.a.createElement(B.a,{value:this.state.instances_in_use/this.state.instances_max_val*this.state.instances_max_val,minValue:0,maxValue:this.state.instances_max_val,text:"".concat(this.state.instances_in_use/this.state.instances_max_val*100,"%")}),o.a.createElement(R.Col,{xs:!0},o.a.createElement("p",null,o.a.createElement("b",null,"Total Allocated: "),this.state.instances_max_val),o.a.createElement("p",null,o.a.createElement("b",null,"In-use: "),this.state.instances_in_use)))))),o.a.createElement(R.Col,{xs:!0},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("p",null,"CPU Cores"),this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.Row,null,o.a.createElement(B.a,{value:this.state.core_in_use/this.state.core_max_val*this.state.core_max_val,minValue:0,maxValue:this.state.core_max_val,text:"".concat(this.state.core_in_use/this.state.core_max_val*100,"%")}),o.a.createElement(R.Col,{xs:!0},o.a.createElement("p",null,o.a.createElement("b",null,"Total Allocated: "),this.state.core_max_val),o.a.createElement("p",null,o.a.createElement("b",null,"In-use: "),this.state.core_in_use)))))),o.a.createElement(R.Col,{xs:!0},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("p",null,"Ram Usage"),this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.Row,null,o.a.createElement(B.a,{value:this.state.ram_in_use/this.state.ram_max_val*this.state.ram_max_val,minValue:0,maxValue:this.state.ram_max_val,text:"".concat(this.state.ram_in_use/this.state.ram_max_val*100,"%")}),o.a.createElement(R.Col,{xs:!0},o.a.createElement("p",null,o.a.createElement("b",null,"Total Allocated: "),this.state.ram_max_val),o.a.createElement("p",null,o.a.createElement("b",null,"In-use: "),this.state.ram_in_use)))))))),o.a.createElement("div",{style:{paddingLeft:"10px",paddingTop:"10px",paddingBottom:"10px",paddingRight:"10px",boxSizing:"content-box"}}),o.a.createElement("div",{style:{paddingLeft:"10px",paddingTop:"10px",paddingBottom:"10px",paddingRight:"10px",boxSizing:"content-box"}},o.a.createElement(R.Row,null,o.a.createElement(R.Col,{xs:!0},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("p",null,"Floating IPs"),this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.Row,null,o.a.createElement(B.a,{value:this.state.floatingip_in_use/this.state.floatingip_max_val*this.state.floatingip_max_val,minValue:0,maxValue:this.state.floatingip_max_val,text:"".concat(this.state.floatingip_in_use/this.state.floatingip_max_val*100,"%")}),o.a.createElement(R.Col,{xs:!0},o.a.createElement("p",null,o.a.createElement("b",null,"Total Allocated: "),this.state.floatingip_max_val),o.a.createElement("p",null,o.a.createElement("b",null,"In-use: "),this.state.floatingip_in_use)))))),o.a.createElement(R.Col,{xs:!0},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("p",null,"Key Pairs"),this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.Row,null,o.a.createElement(B.a,{value:this.state.keypairs_in_use/this.state.keypairs_max_val*this.state.keypairs_max_val,minValue:0,maxValue:this.state.keypairs_max_val,text:"".concat(this.state.keypairs_in_use/this.state.keypairs_max_val*100,"%")}),o.a.createElement(R.Col,{xs:!0},o.a.createElement("p",null,o.a.createElement("b",null,"Total Allocated: "),this.state.keypairs_max_val),o.a.createElement("p",null,o.a.createElement("b",null,"In-use: "),this.state.keypairs_in_use)))))),o.a.createElement(R.Col,{xs:!0},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("p",null,"Security Groups"),this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(R.Row,null,o.a.createElement(B.a,{value:this.state.securitygroup_in_use/this.state.securitygroup_max_val*this.state.securitygroup_max_val,minValue:0,maxValue:this.state.securitygroup_max_val,text:"".concat(this.state.securitygroup_in_use/this.state.securitygroup_max_val*100,"%")}),o.a.createElement(R.Col,{xs:!0},o.a.createElement("p",null,o.a.createElement("b",null,"Total Allocated: "),this.state.securitygroup_max_val),o.a.createElement("p",null,o.a.createElement("b",null,"In-use: "),this.state.securitygroup_in_use)))))))))}}]),t}(n.Component)),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showDrawer=a.showDrawer.bind(Object(h.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(h.a)(a)),a.sessionDelete=a.sessionDelete.bind(Object(h.a)(a)),a.state={showDrawerEvent:!1,jwtValidity:!0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"sessionDelete",value:function(){this.setState({jwtValidity:!1})}},{key:"showDrawer",value:function(e){this.setState({showDrawerEvent:!0})}},{key:"hideDrawer",value:function(e){this.setState({showDrawerEvent:!1})}},{key:"render",value:function(){return j()||this.sessionDelete(),o.a.createElement("div",null,this.state.jwtValidity?o.a.createElement(o.a.Fragment,null,o.a.createElement(b,{dashboardView:!0,showDrawer:this.showDrawer}),this.state.showDrawerEvent?o.a.createElement(x,{handleHideDrawer:this.hideDrawer}):"",o.a.createElement(F,null)):o.a.createElement(D.a,{to:"/signin"}))}}]),t}(n.Component),A=a(55),M=a(93),N=a(40),z=a(160),P=a(94),H=a(161),U=a(162),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showPassword:!1,email:"",password:"",showError:!1,loginSpinner:!1,redirect:!1},a.handleLockClick=a.handleLockClick.bind(Object(h.a)(a)),a.formHandler=a.formHandler.bind(Object(h.a)(a)),a.formSubmit=a.formSubmit.bind(Object(h.a)(a)),a.toastGone=a.toastGone.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toastGone",value:function(){console.log("tast is gone"),this.setState({showError:!1})}},{key:"formHandler",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;this.setState(Object(A.a)({},t,a))}},{key:"formSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({loadingSpinner:!0});var a={email:this.state.email,password:this.state.password};E.a.post("/auth/login",a).then((function(e){localStorage.setItem("auth_token",e.data.auth_token),console.log(e.data.auth_token),t.setState({loadingSpinner:!1}),t.setState({redirect:!0})})).catch((function(e){console.log(e),t.setState({loadingSpinner:!1}),t.setState({showError:!0})}))}},{key:"handleLockClick",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"render",value:function(){var e=this.state.showPassword,t=o.a.createElement(M.a,{content:"".concat(e?"Hide":"Show"," Password")},o.a.createElement(v.b,{icon:e?"unlock":"lock",intent:N.a.WARNING,minimal:!0,onClick:this.handleLockClick}));return o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!1,showDrawer:!1}),o.a.createElement("div",{style:{padding:"10em"}},this.state.showError?o.a.createElement(z.a,{position:S.a.TOP,canEscapeKeyClear:!0},o.a.createElement(P.a,{intent:"danger",message:"Email/Password is wrong! Please try again.",timeout:"3000",onDismiss:this.toastGone})):"",this.state.redirect?o.a.createElement(D.a,{to:"/dashboard/overview"}):o.a.createElement(R.Grid,{fluid:!0},o.a.createElement(R.Row,null,o.a.createElement(R.Col,{xs:12},o.a.createElement(R.Row,{center:"xs"},o.a.createElement(R.Col,{xs:4},o.a.createElement(T.a,{elevation:C.a.THREE},o.a.createElement("h2",{align:"center"},"Sign In"),o.a.createElement("form",{method:"POST",onSubmit:this.formSubmit},o.a.createElement(H.a,null,o.a.createElement(U.a,{id:"email",name:"email",large:!0,onChange:this.formHandler,leftIcon:"envelope",placeholder:"Email"}),o.a.createElement("br",null),o.a.createElement(U.a,{id:"password",name:"password",large:!0,rightElement:t,onChange:this.formHandler,type:e?"text":"password",leftIcon:"key",placeholder:"Password"})),o.a.createElement(v.b,{intent:"success",loading:this.state.loadingSpinner,icon:"log-in",text:"Login",type:"submit"}))))))))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showPassword:!1,firstname:"",lastname:"",email:"",password:"",confirmpassword:"",phone:""},a.handleLockClick=a.handleLockClick.bind(Object(h.a)(a)),a.formHandler=a.formHandler.bind(Object(h.a)(a)),a.formSubmit=a.formSubmit.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"formHandler",value:function(e){e.preventDefault();var t=e.target.name,a=e.target.value;this.setState(Object(A.a)({},t,a))}},{key:"formSubmit",value:function(e){e.preventDefault(),console.log(this.state);var t={firstname:this.state.firstname,lastname:this.state.lastname,email:this.state.email,password:this.state.password,username:this.state.phone};E.a.post("/auth/register",t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}},{key:"handleLockClick",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"render",value:function(){var e=this.state.showPassword,t=o.a.createElement(M.a,{content:"".concat(e?"Hide":"Show"," Password")},o.a.createElement(v.b,{icon:e?"unlock":"lock",intent:N.a.WARNING,minimal:!0,onClick:this.handleLockClick}));return o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!1,showDrawer:!1}),o.a.createElement("div",{style:{padding:"5em"}},o.a.createElement(R.Grid,{fluid:!0},o.a.createElement(R.Row,null,o.a.createElement(R.Col,{xs:12},o.a.createElement(R.Row,{center:"xs"},o.a.createElement(R.Col,{xs:4},o.a.createElement(T.a,{elevation:C.a.THREE},o.a.createElement("h2",{align:"center"},"Sign Up"),o.a.createElement("form",{method:"POST",onSubmit:this.formSubmit},o.a.createElement(H.a,null,o.a.createElement(U.a,{id:"firstname",name:"firstname",large:!0,leftIcon:"user",placeholder:"First Name",onChange:this.formHandler}),o.a.createElement("br",null),o.a.createElement(U.a,{id:"lastname",name:"lastname",large:!0,leftIcon:"user",placeholder:"Last Name",onChange:this.formHandler}),o.a.createElement("br",null),o.a.createElement(U.a,{id:"email",name:"email",large:!0,leftIcon:"envelope",placeholder:"Email",onChange:this.formHandler}),o.a.createElement("br",null),o.a.createElement(U.a,{id:"password",name:"password",large:!0,rightElement:t,type:e?"text":"password",leftIcon:"key",placeholder:"Password",onChange:this.formHandler}),o.a.createElement("br",null),o.a.createElement(U.a,{id:"confirmpassoword",name:"confirmpassword",large:!0,rightElement:t,type:"password",leftIcon:"key",placeholder:"Confirm Password",onChange:this.formHandler}),o.a.createElement("br",null),o.a.createElement(U.a,{id:"phone",name:"phone",large:!0,leftIcon:"mobile-phone",placeholder:"Phone Number",onChange:this.formHandler})),o.a.createElement(v.b,{intent:"success",icon:"new-person",text:"Sign Up",type:"submit"}))))))))))}}]),t}(n.Component),Y=a(165),Z=a(95),K=a(49),J=a(89),q=a(18),X=a(38),$=a(48),Q=a(19);function ee(){var e=Object(q.a)(["\n  width: 300px;\n  height: 35px;\n  background-color: #5995ef;\n  color: #fff;\n  border-radius: 3px;\n"]);return ee=function(){return e},e}function te(){var e=Object(q.a)(["\n  position: absolute;\n  background-color: DodgerBlue;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 99;\n"]);return te=function(){return e},e}function ae(){var e=Object(q.a)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  paddingtop: 50%;\n"]);return ae=function(){return e},e}function ne(){var e=Object(q.a)(["\n  position: relative;\n  font-family: Arial;\n  background-color: DodgerBlue;\n"]);return ne=function(){return e},e}function oe(){var e=Object(q.a)(["\n  width: 300px;\n  height: 35px;\n  border: 1px solid #ccc;\n  background-color: #fff;\n"]);return oe=function(){return e},e}function le(){var e=Object(q.a)(["\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return le=function(){return e},e}function re(){var e=Object(q.a)(['\n  display: flex;\n  flex-direction: column;\n  color: #777;\n  font-family: "Raleway", sans-serif;\n  font-size: 1em;\n  margin: 0.5em 0;\n  position: relative;\n']);return re=function(){return e},e}var ie=Q.a.label(re()),se=Q.a.form(le()),ce=Q.a.input(oe()),ue=Q.a.div(ne()),me=Q.a.div(ae()),he=Q.a.option(te()),de=Q.a.button(ee()),pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isFetching:!1,volumeTypeItem:[],projectID:"",scopedToken:"",imageNames:[],flavorNames:[],networkNames:[],volumeID:""},a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.createVolume=a.createVolume.bind(Object(h.a)(a)),a.checkVolumeStatus=a.checkVolumeStatus.bind(Object(h.a)(a)),a.formSubmit=a.formSubmit.bind(Object(h.a)(a)),a.createVM=a.createVM.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.props.showLaunchButton?console.log("not fetching launch instance data"):(this.setState({isFetching:!0}),this.authenticateToken().then((function(t){var a={scopedToken:e.state.scopedToken,projectID:e.state.projectID};E.a.all([E.a.post("/api/v1/vm-service/get-volume-type",a),E.a.post("/api/v1/vm-service/get-image-info",a),E.a.post("/api/v1/vm-service/get-flavors",a),E.a.post("/api/v1/vm-service/get-networks",a)]).then(E.a.spread((function(t,a,n,o){e.setState({volumeTypeItem:t.data}),e.setState({imageNames:a.data}),e.setState({flavorNames:n.data}),e.setState({networkNames:o.data}),e.setState({isFetching:!1})}))).catch((function(e){console.log(e)}))})))}},{key:"createVolume",value:function(e){var t=this,a={scopedToken:this.state.scopedToken,projectID:this.state.projectID,size:e.volumesize,name:e.volumename,imageRef:e.imagename,volume_type:e.volumetype};return E.a.post("/api/v1/vm-service/create-volume",a).then((function(e){t.setState({volumeID:e.data.id}),t.forceUpdate()})).catch((function(e){console.log(e)}))}},{key:"formSubmit",value:function(e){var t=this;this.setState({forVMCreation:e}),this.setState({isFetching:!0}),this.createVolume(e).then((function(e){t.checkVolumeStatus(t.state.volumeID)}))}},{key:"createVM",value:function(e){console.log("creating vm");var t={scopedToken:this.state.scopedToken,flavorRef:e.flavorname,name:e.volumename,volumeUUID:this.state.volumeID,networksUUID:e.networkname};return E.a.post("/api/v1/vm-service/create-vm",t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}},{key:"checkVolumeStatus",value:function(e){var t=this,a={scopedToken:this.state.scopedToken,projectID:this.state.projectID,volumeID:e};E.a.post("/api/v1/vm-service/get-volume-status",a).then((function(a){var n=a.data.status;"available"!==n?setTimeout(t.checkVolumeStatus(e),3e3):"available"===n&&(console.log("volume created"),t.createVM(t.state.forVMCreation).then((function(e){console.log("createvm returned"),t.setState({isFetching:!1})})))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(_.a,{size:_.a.SIZE_SMALL,icon:"cloud-upload",onClose:this.props.closeInstanceDrawer,title:"Launch Instance",isOpen:this.props.drawerOpen,position:S.a.RIGHT},o.a.createElement("div",{className:X.a.DRAWER_BODY},o.a.createElement("div",{className:X.a.DIALOG_BODY},this.state.isFetching?o.a.createElement(me,null,o.a.createElement(V.a,null)):o.a.createElement($.a,{initialValues:{volumename:"",volumesize:"",volumetype:"",imagename:"",flavorname:"",networkname:""},onSubmit:function(t){e.formSubmit(t)},render:function(t){var a=t.values,n=t.handleChange,l=t.handleBlur,r=t.handleSubmit;return o.a.createElement(se,{onSubmit:r},o.a.createElement(ie,null,"Volume Name",o.a.createElement(ce,{onChange:n,onBlur:l,value:a.volumename,type:"text",name:"volumename",placeholder:"Enter Volume Name"})),o.a.createElement(ie,null,"Size",o.a.createElement(ce,{onChange:n,onBlur:l,value:a.volumesize,type:"number",name:"volumesize",placeholder:"Enter Volume Size(GB)"})),o.a.createElement(ie,null,"Select Volume Type",o.a.createElement(ue,null,o.a.createElement("select",{name:"volumetype",value:a.volumetype,onChange:n,onBlur:l,style:{display:"block"}},o.a.createElement(he,{value:"",label:"Volume Types"}),e.state.volumeTypeItem.map((function(e){return o.a.createElement(he,{key:e.id,value:e.id,label:e.name})}))))),o.a.createElement(ie,null,"Select Image",o.a.createElement(ue,null,o.a.createElement("select",{name:"imagename",value:a.imagename,onChange:n,onBlur:l,style:{}},o.a.createElement(he,{value:"",label:"Select an Image"}),e.state.imageNames.map((function(e){return o.a.createElement(he,{key:e.id,value:e.id,label:e.name+" ("+e.size+" MB)"})}))))),o.a.createElement(ie,null,"Select Flavor",o.a.createElement(ue,null,o.a.createElement("select",{name:"flavorname",value:a.flavorname,onChange:n,onBlur:l,style:{}},o.a.createElement(he,{value:"",label:"Select a flavor"}),e.state.flavorNames.map((function(e){return o.a.createElement(he,{key:e.id,value:e.id,label:e.name})}))))),o.a.createElement(ie,null,"Select Network",o.a.createElement(ue,null,o.a.createElement("select",{name:"networkname",value:a.networkname,onChange:n,onBlur:l,style:{}},o.a.createElement(he,{value:"",label:"Select a network"}),e.state.networkNames.map((function(e){return o.a.createElement(he,{key:e.id,value:e.id,label:e.name})}))))),o.a.createElement(de,{type:"submit"},"Launch Instance"))}})))))}}]),t}(n.Component),ve=a(102),ge=a(163),fe=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),console.log("instances page"),console.log(a.props.match.params.instanceid),a.showDrawer=a.showDrawer.bind(Object(h.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(h.a)(a)),a.sessionDelete=a.sessionDelete.bind(Object(h.a)(a)),a.state={showDrawerEvent:!1,jwtValidity:!0,openLaunchDrawer:!1,projectID:"",scopedToken:"",vm_info:[],flavor_id:"",networks_list:[]},a.launchInstanceDrawer=a.launchInstanceDrawer.bind(Object(h.a)(a)),a.closeInstanceDrawer=a.closeInstanceDrawer.bind(Object(h.a)(a)),a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.getVMInfo=a.getVMInfo.bind(Object(h.a)(a)),a.deleteUser=a.deleteUser.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0}),this.authenticateToken().then((function(t){e.getVMInfo().then((function(t){console.log("got it"),e.setState({isFetching:!1})}))}))}},{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"getVMInfo",value:function(){var e=this,t={scopedToken:this.state.scopedToken,serverID:this.props.match.params.instanceid};return E.a.post("/api/v1/vm-service/get-vm-info",t).then((function(t){var a=[],n=t.data;e.setState({vm_info:n}),e.setState({flavor_id:n.flavor.id}),e.setState({volume_id:n["os-extended-volumes:volumes_attached"][0].id}),console.log(n);for(var o=0,l=Object.entries(n.addresses);o<l.length;o++){var r=l[o],i=Object(ve.a)(r,2),s=i[0];i[1];a.push({name:s,ip:n.addresses[s][0].addr}),console.log("".concat(s,": ").concat(n.addresses[s][0].addr))}e.setState({networks_list:a})})).catch((function(e){console.log(e)}))}},{key:"deleteUser",value:function(e,t){t.preventDefault(),console.log(e);var a={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},n={projectID:this.state.projectID,user_email:e};return E.a.post("/auth/deleteuser",n,a).then((function(e){console.log(e),window.location.reload()})).catch((function(e){console.log(e)}))}},{key:"sessionDelete",value:function(){this.setState({jwtValidity:!1})}},{key:"showDrawer",value:function(e){this.setState({showDrawerEvent:!0})}},{key:"hideDrawer",value:function(e){this.setState({showDrawerEvent:!1})}},{key:"launchInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!0})}},{key:"closeInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!1}),window.location.reload()}},{key:"render",value:function(){return j()||this.sessionDelete(),o.a.createElement(o.a.Fragment,null,this.state.jwtValidity?o.a.createElement(o.a.Fragment,null,this.state.showDrawerEvent?o.a.createElement(x,{handleHideDrawer:this.hideDrawer}):"",o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!0,showDrawer:this.showDrawer}),o.a.createElement("div",null,o.a.createElement("div",{style:{padding:"1em",paddingLeft:"10%",paddingRight:"10%"},align:"right"},o.a.createElement(v.b,{onClick:this.launchInstanceDrawer,intent:"success"},"Edit Instance"),o.a.createElement("div",{style:{paddingTop:"1em"},align:"left"},o.a.createElement(T.a,{elevation:C.a.TWO},this.state.isFetching?o.a.createElement(V.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Details: ",this.state.vm_info.name),o.a.createElement(ge.a,null),o.a.createElement("br",null),o.a.createElement("h3",null,"Overview"),o.a.createElement(ge.a,null),o.a.createElement("p",null,o.a.createElement("strong",null,"Name: "),this.state.vm_info.name),o.a.createElement("p",null,o.a.createElement("strong",null,"ID: "),this.state.vm_info.id),o.a.createElement("p",null,o.a.createElement("strong",null,"Status: "),this.state.vm_info.status),o.a.createElement("p",null,o.a.createElement("strong",null,"Availability Zone: "),this.state.vm_info["OS-EXT-AZ:availability_zone"]),o.a.createElement("p",null,o.a.createElement("strong",null,"Created: "),this.state.vm_info.created),o.a.createElement("br",null),o.a.createElement("h3",null,"Specs"),o.a.createElement(ge.a,null),o.a.createElement("p",null,o.a.createElement("strong",null,"Flavor ID: "),this.state.flavor_id),o.a.createElement("p",null,o.a.createElement("strong",null,"Volume ID: "),this.state.volume_id),o.a.createElement("br",null),o.a.createElement("h3",null,"IP Addresses"),o.a.createElement(ge.a,null),o.a.createElement("p",null,this.state.networks_list.map((function(e){return o.a.createElement("p",null,o.a.createElement("strong",null,e.name,": "),e.ip)})))))))))):o.a.createElement(D.a,{to:"/signin"}))}}]),t}(n.Component);var Ee={overflowY:"scroll",height:"500px",position:"relative"},be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isFetching:!1,openLaunchDrawer:!1,vm_list:[],showToast:!1,toastData:"Request unsuccessfull",showDeleteAlert:!1,vm_delete_id:"",showLaunchButton:!1,perm_data:[]},a.launchInstanceDrawer=a.launchInstanceDrawer.bind(Object(h.a)(a)),a.closeInstanceDrawer=a.closeInstanceDrawer.bind(Object(h.a)(a)),a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.getVMList=a.getVMList.bind(Object(h.a)(a)),a.openConsole=a.openConsole.bind(Object(h.a)(a)),a.stopVM=a.stopVM.bind(Object(h.a)(a)),a.toastGone=a.toastGone.bind(Object(h.a)(a)),a.startVM=a.startVM.bind(Object(h.a)(a)),a.rebootVM=a.rebootVM.bind(Object(h.a)(a)),a.deleteVM=a.deleteVM.bind(Object(h.a)(a)),a.handleDeleteCancel=a.handleDeleteCancel.bind(Object(h.a)(a)),a.handleDeleteConfirm=a.handleDeleteConfirm.bind(Object(h.a)(a)),a.handleDeleteOpen=a.handleDeleteOpen.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toastGone",value:function(){console.log("tast is gone"),this.setState({showToast:!1})}},{key:"launchInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!0})}},{key:"closeInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!1})}},{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0}),this.authenticateToken().then((function(t){console.log("done auth");try{var a=function(){try{var e=localStorage.getItem("auth_token"),t=y()(e).roles;console.log(t);var a={headers:{Authorization:"Bearer "+e},"Content-Type":"application/json"};return E.a.get("/auth/getsubuserpermissionlist",a).then((function(e){return console.log(e.data.data),e.data.data})).catch((function(e){return console.log(e),[]}))}catch(n){return console.log("Token not found"),[]}}().then((function(t){console.log("gotchaaaa"),console.log(t),e.setState({perm_data:t}),t.includes("create_vm")?e.setState({showLaunchButton:!0}):e.setState({showLaunchButton:!1})}));console.log(a)}catch(n){console.log("some error occurred at instancebody.js componentdidmount call")}e.getVMList().then((function(t){console.log("done get"),e.setState({isFetching:!1})}))}))}},{key:"handleDeleteOpen",value:function(e,t){this.setState({vm_delete_id:e}),this.setState({showDeleteAlert:!0})}},{key:"handleDeleteConfirm",value:function(){this.setState({showDeleteAlert:!1}),this.deleteVM()}},{key:"handleDeleteCancel",value:function(){this.setState({showDeleteAlert:!1})}},{key:"stopVM",value:function(e,t){var a=this;console.log("stopping vm...");var n=e,o={scopedToken:this.state.scopedToken,serverID:n};return E.a.post("/api/v1/vm-service/stop-vm",o).then((function(e){a.setState({toastData:e.data.msg}),console.log(e.data),a.setState({showToast:!0})})).catch((function(e){console.log(e)}))}},{key:"rebootVM",value:function(e,t){var a=this;console.log("rebooting vm...");var n=e,o={scopedToken:this.state.scopedToken,serverID:n};return E.a.post("/api/v1/vm-service/reboot-vm",o).then((function(e){a.setState({toastData:e.data.msg}),console.log(e.data),a.setState({showToast:!0})})).catch((function(e){console.log(e)}))}},{key:"deleteVM",value:function(){var e=this;console.log("deleting vm...");var t=this.state.vm_delete_id,a={scopedToken:this.state.scopedToken,serverID:t};return E.a.post("/api/v1/vm-service/delete-vm",a).then((function(t){e.setState({toastData:"Successfully deleted vm."}),console.log(t.data),e.setState({showToast:!0})})).catch((function(e){console.log(e)}))}},{key:"startVM",value:function(e,t){var a=this;console.log("starting vm...");var n=e,o={scopedToken:this.state.scopedToken,serverID:n};return E.a.post("/api/v1/vm-service/start-vm",o).then((function(e){a.setState({toastData:e.data.msg}),console.log(e.data),a.setState({showToast:!0})})).catch((function(e){console.log(e)}))}},{key:"openConsole",value:function(e,t){var a=e,n={scopedToken:this.state.scopedToken,serverID:a};return E.a.post("/api/v1/vm-service/remote-console",n).then((function(e){var t=e.data.msg.console.url;console.log(t),window.open(t,"_blank").focus()})).catch((function(e){console.log(e)}))}},{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"getVMList",value:function(){var e=this,t={scopedToken:this.state.scopedToken};return E.a.post("/api/v1/vm-service/get-vm-list",t).then((function(t){var a=t.data;e.setState({vm_list:a}),console.log(a)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(pe,{drawerOpen:this.state.openLaunchDrawer,closeInstanceDrawer:this.closeInstanceDrawer,showLaunchButton:this.state.showLaunchButton}),o.a.createElement("div",{style:{padding:"1em",paddingLeft:"10%",paddingRight:"10%"},align:"right"},o.a.createElement(v.b,{onClick:this.launchInstanceDrawer,disabled:!this.state.showLaunchButton,intent:"success",icon:"cloud-upload"},"Launch Instance"),this.state.showToast?o.a.createElement(z.a,{position:S.a.RIGHT_TOP,canEscapeKeyClear:!0},o.a.createElement(P.a,{intent:"primary",message:this.state.toastData,timeout:"3000",onDismiss:this.toastGone})):"",o.a.createElement(Y.a,{cancelButtonText:"Cancel",confirmButtonText:"Delete VM",icon:"trash",intent:N.a.DANGER,isOpen:this.state.showDeleteAlert,onCancel:this.handleDeleteCancel,onConfirm:this.handleDeleteConfirm},o.a.createElement("p",null,"Are you sure you want to Delete the VM? You won't be able to restore it later. Make sure you have a backup.")),o.a.createElement("div",{style:{paddingTop:"1em"},align:"left"},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("h2",null,"Instances"),o.a.createElement("div",{style:Ee},this.state.isFetching?o.a.createElement(V.a,null):this.state.vm_list.map((function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{marginBlock:0,paddingTop:".25em",paddingBottom:".25em",paddingLeft:".25em",paddingRight:".25em"}},o.a.createElement(T.a,{interactive:!0,elevation:C.a.ONE},o.a.createElement("div",{key:t.id,style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("p",null,t.name),o.a.createElement(Z.a,null,o.a.createElement(v.b,{onClick:function(e){e.stopPropagation(),window.location.href="/dashboard/instance-details/".concat(t.id)},icon:"list-detail-view"},"Details"),o.a.createElement(v.b,{value:t.name,onClick:function(a){a.stopPropagation(),e.openConsole(t.id,a)},icon:"console",disabled:!e.state.perm_data.includes("console_vm")},"Console"),o.a.createElement(K.a,{content:o.a.createElement(o.a.Fragment,null," ",o.a.createElement(O.a,null,o.a.createElement(I.a,{onClick:function(a){e.startVM(t.id,a)},icon:"play",text:"Start VM",disabled:!e.state.perm_data.includes("start_vm")}),o.a.createElement(J.a,null),o.a.createElement(I.a,{onClick:function(a){e.stopVM(t.id,a)},icon:"stop",text:"Stop VM",disabled:!e.state.perm_data.includes("stop_vm")}),o.a.createElement(J.a,null),o.a.createElement(I.a,{onClick:function(a){e.rebootVM(t.id,a)},icon:"reset",text:"Reboot VM",disabled:!e.state.perm_data.includes("reboot_vm")}),o.a.createElement(J.a,null),o.a.createElement(I.a,{onClick:function(a){e.handleDeleteOpen(t.id,a)},icon:"trash",text:"Delete VM",disabled:!e.state.perm_data.includes("delete_vm")})))},o.a.createElement(v.b,{onClick:function(e){},icon:"cog",rightIcon:"caret-down"},"Actions")))))),o.a.createElement(D.d,null,o.a.createElement(D.b,{path:"/dashboard/instance-details"}," ",o.a.createElement(fe,null))))})))))))}}]),t}(n.Component),we=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showDrawer=a.showDrawer.bind(Object(h.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(h.a)(a)),a.sessionDelete=a.sessionDelete.bind(Object(h.a)(a)),a.state={showDrawerEvent:!1,jwtValidity:!0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"sessionDelete",value:function(){this.setState({jwtValidity:!1})}},{key:"showDrawer",value:function(e){this.setState({showDrawerEvent:!0})}},{key:"hideDrawer",value:function(e){this.setState({showDrawerEvent:!1})}},{key:"render",value:function(){return j()||this.sessionDelete(),o.a.createElement(o.a.Fragment,null,this.state.jwtValidity?o.a.createElement(o.a.Fragment,null,this.state.showDrawerEvent?o.a.createElement(x,{handleHideDrawer:this.hideDrawer}):"",o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!0,showDrawer:this.showDrawer}),o.a.createElement(be,null))):o.a.createElement(D.a,{to:"/signin"}))}}]),t}(n.Component),De=a(60);function ke(){var e=Object(q.a)(["\n  width: 300px;\n  height: 35px;\n  background-color: #5995ef;\n  color: #fff;\n  border-radius: 3px;\n"]);return ke=function(){return e},e}function ye(){var e=Object(q.a)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  paddingtop: 50%;\n"]);return ye=function(){return e},e}function je(){var e=Object(q.a)(["\n  position: relative;\n  font-family: Arial;\n  background-color: DodgerBlue;\n"]);return je=function(){return e},e}function _e(){var e=Object(q.a)(["\n  width: 300px;\n  height: 35px;\n  border: 1px solid #ccc;\n  background-color: #fff;\n"]);return _e=function(){return e},e}function Se(){var e=Object(q.a)(["\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n"]);return Se=function(){return e},e}function Oe(){var e=Object(q.a)(['\n  display: flex;\n  flex-direction: column;\n  color: #777;\n  font-family: "Raleway", sans-serif;\n  font-size: 1em;\n  margin: 0.5em 0;\n  position: relative;\n']);return Oe=function(){return e},e}var Ie=Q.a.label(Oe()),xe=Q.a.form(Se()),Te=Q.a.input(_e()),Ce=Q.a.div(je()),Ve=Q.a.div(ye()),Re=Q.a.button(ke()),Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).changeSelect=function(e){a.setState({rolename:e.value})},a.state={isFetching:!1,projectID:"",scopedToken:"",roles_list:[],rolename:""},a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.formSubmit=a.formSubmit.bind(Object(h.a)(a)),a.getRoles=a.getRoles.bind(Object(h.a)(a)),a.setUser=a.setUser.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"getRoles",value:function(e,t){var a=this,n=[],o={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},l={projectID:this.state.projectID};return E.a.post("/auth/getrole",l,o).then((function(e){e.data.data.map((function(e){n.push({label:e.split("_")[0],value:e.split("_")[0]})})),a.setState({roles_list:n})})).catch((function(e){console.log(e)}))}},{key:"setUser",value:function(e,t,a){var n=localStorage.getItem("auth_token"),o=y()(n).sub,l={headers:{Authorization:"Bearer "+n},"Content-Type":"application/json"},r={projectID:this.state.projectID,role_name:e,email:t,password:a,parent_id:o};return E.a.post("/auth/setuser",r,l).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0}),this.authenticateToken().then((function(t){e.getRoles().then((function(t){console.log("got it"),console.log(e.state.roles_list),e.setState({isFetching:!1})}))}))}},{key:"formSubmit",value:function(e){var t=this;this.setState({isFetching:!0}),console.log(e.email),console.log(this.state.rolename),this.setUser(this.state.rolename,e.email,e.password).then((function(e){console.log("done"),t.setState({isFetching:!1})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(_.a,{size:_.a.SIZE_SMALL,icon:"new-person",onClose:this.props.closeInstanceDrawer,title:"Add User",isOpen:this.props.drawerOpen,position:S.a.RIGHT},o.a.createElement("div",{className:X.a.DRAWER_BODY},o.a.createElement("div",{className:X.a.DIALOG_BODY},this.state.isFetching?o.a.createElement(Ve,null,o.a.createElement(V.a,null)):o.a.createElement($.a,{initialValues:{email:"",password:""},onSubmit:function(t){e.formSubmit(t)},render:function(t){var a=t.values,n=t.handleChange,l=t.handleBlur,r=t.handleSubmit;return o.a.createElement(xe,{onSubmit:r},o.a.createElement(Ie,null,"Email",o.a.createElement(Te,{onChange:n,onBlur:l,value:a.email,type:"email",name:"email",placeholder:"Enter Email"})),o.a.createElement(Ie,null,"Password",o.a.createElement(Te,{onChange:n,onBlur:l,value:a.password,type:"text",name:"password",placeholder:"Enter Password"})),o.a.createElement(Ie,null,"Select Role",o.a.createElement(Ce,null,o.a.createElement(De.a,{name:"colors",placeholder:"Select Role",options:e.state.roles_list,className:"basic-multi-select",classNamePrefix:"select",onChange:e.changeSelect,closeMenuOnSelect:!0}))),o.a.createElement(Re,{type:"submit"},"Add User"))}})))))}}]),t}(n.Component),Fe={overflowY:"scroll",height:"500px",position:"relative"},Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showDrawer=a.showDrawer.bind(Object(h.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(h.a)(a)),a.sessionDelete=a.sessionDelete.bind(Object(h.a)(a)),a.state={showDrawerEvent:!1,jwtValidity:!0,openLaunchDrawer:!1,projectID:"",scopedToken:"",users_list:[]},a.launchInstanceDrawer=a.launchInstanceDrawer.bind(Object(h.a)(a)),a.closeInstanceDrawer=a.closeInstanceDrawer.bind(Object(h.a)(a)),a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.getUsers=a.getUsers.bind(Object(h.a)(a)),a.deleteUser=a.deleteUser.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0}),this.authenticateToken().then((function(t){e.getUsers().then((function(t){console.log("got it"),e.setState({isFetching:!1})}))}))}},{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"getUsers",value:function(e,t){var a=this,n=[],o={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},l={projectID:this.state.projectID};return E.a.post("/auth/getuser",l,o).then((function(e){e.data.data.map((function(e){n.push(e.split("_")[0])})),a.setState({users_list:n})})).catch((function(e){console.log(e)}))}},{key:"deleteUser",value:function(e,t){t.preventDefault(),console.log(e);var a={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},n={projectID:this.state.projectID,user_email:e};return E.a.post("/auth/deleteuser",n,a).then((function(e){console.log(e),window.location.reload()})).catch((function(e){console.log(e)}))}},{key:"sessionDelete",value:function(){this.setState({jwtValidity:!1})}},{key:"showDrawer",value:function(e){this.setState({showDrawerEvent:!0})}},{key:"hideDrawer",value:function(e){this.setState({showDrawerEvent:!1})}},{key:"launchInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!0})}},{key:"closeInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!1}),window.location.reload()}},{key:"render",value:function(){var e=this;return j()||this.sessionDelete(),o.a.createElement(o.a.Fragment,null,this.state.jwtValidity?o.a.createElement(o.a.Fragment,null,this.state.showDrawerEvent?o.a.createElement(x,{handleHideDrawer:this.hideDrawer}):"",o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!0,showDrawer:this.showDrawer}),o.a.createElement("div",null,o.a.createElement(Be,{drawerOpen:this.state.openLaunchDrawer,closeInstanceDrawer:this.closeInstanceDrawer}),o.a.createElement("div",{style:{padding:"1em",paddingLeft:"10%",paddingRight:"10%"},align:"right"},o.a.createElement(v.b,{onClick:this.launchInstanceDrawer,intent:"success",icon:"new-person"},"Add User"),o.a.createElement("div",{style:{paddingTop:"1em"},align:"left"},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("h2",null,"Users"),o.a.createElement("div",{style:Fe},this.state.users_list.map((function(t){return o.a.createElement("div",{key:t,style:{marginBlock:0,paddingTop:".25em",paddingBottom:".25em",paddingLeft:".25em",paddingRight:".25em"}},o.a.createElement(T.a,{interactive:!0,elevation:C.a.ONE},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("strong",null,o.a.createElement("p",null,t)),o.a.createElement(v.b,{value:t,id:t,onClick:function(a){return e.deleteUser(t,a)},intent:"danger",icon:"trash"},"Delete User"))))}))))))))):o.a.createElement(D.a,{to:"/signin"}))}}]),t}(n.Component);function Ae(){var e=Object(q.a)(["\n  width: 300px;\n  height: 35px;\n  background-color: #5995ef;\n  color: #fff;\n  border-radius: 3px;\n"]);return Ae=function(){return e},e}function Me(){var e=Object(q.a)(["\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  paddingtop: 50%;\n"]);return Me=function(){return e},e}function Ne(){var e=Object(q.a)(["\n  position: relative;\n  font-family: Arial;\n  background-color: DodgerBlue;\n"]);return Ne=function(){return e},e}function ze(){var e=Object(q.a)(["\n  width: 300px;\n  height: 35px;\n  border: 1px solid #ccc;\n  background-color: #fff;\n"]);return ze=function(){return e},e}function Pe(){var e=Object(q.a)(["\n  width: 300px;\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n"]);return Pe=function(){return e},e}function He(){var e=Object(q.a)(['\n  display: flex;\n  flex-direction: column;\n  color: #777;\n  font-family: "Raleway", sans-serif;\n  font-size: 1em;\n  margin: 0.5em 0;\n  position: relative;\n']);return He=function(){return e},e}var Ue=Q.a.label(He()),Ge=Q.a.form(Pe()),We=Q.a.input(ze()),Ye=Q.a.div(Ne()),Ze=Q.a.div(Me()),Ke=Q.a.button(Ae()),Je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getPermissionList=function(){var e={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},t=[];return E.a.get("/auth/getpermissionlist",e).then((function(e){e.data.data.map((function(e){t.push({value:e.id,label:e.value})})),a.setState({permissionlist:t})})).catch((function(e){console.log(e)}))},a.changeSelect=function(e){a.setState({permissionnames:e})},a.state={isFetching:!1,rolename:"",projectID:"",scopedToken:"",permissionnames:[],permissionlist:[]},a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.formSubmit=a.formSubmit.bind(Object(h.a)(a)),a.addRole=a.addRole.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0}),this.authenticateToken().then((function(t){e.getPermissionList().then((function(t){console.log(e.state),e.setState({isFetching:!1})}))}))}},{key:"formSubmit",value:function(e){var t=this;this.setState({isFetching:!0}),console.log(e.rolename),console.log(this.state.permissionnames),this.addRole(e.rolename,this.state.permissionnames).then((function(e){console.log("done"),t.setState({isFetching:!1})}))}},{key:"addRole",value:function(e,t){var a={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},n=[];t.map((function(e){n.push(e.value)})),console.log(n),console.log(e);var o={role_name:e,projectID:this.state.projectID,permissions_list:n};return E.a.post("/auth/setrole",o,a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(_.a,{size:_.a.SIZE_SMALL,icon:"crown",onClose:this.props.closeInstanceDrawer,title:"Add Role",isOpen:this.props.drawerOpen,position:S.a.RIGHT},o.a.createElement("div",{className:X.a.DRAWER_BODY},o.a.createElement("div",{className:X.a.DIALOG_BODY},this.state.isFetching?o.a.createElement(Ze,null,o.a.createElement(V.a,null)):o.a.createElement($.a,{initialValues:{rolename:"",rolepermissions:""},onSubmit:function(t){e.formSubmit(t)},render:function(t){var a=t.values,n=t.handleChange,l=t.handleBlur,r=t.handleSubmit;t.setFieldValue,t.setFieldTouched;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ge,{onSubmit:r},o.a.createElement(Ue,null,"Role Name",o.a.createElement(We,{onChange:n,onBlur:l,value:a.rolename,type:"text",name:"rolename",placeholder:"Enter Role Name"})),o.a.createElement(Ue,null,"Select Role Permissions",o.a.createElement(Ye,null,o.a.createElement(De.a,{isMulti:!0,name:"colors",placeholder:"Select Permissions",options:e.state.permissionlist,className:"basic-multi-select",classNamePrefix:"select",onChange:e.changeSelect,closeMenuOnSelect:!1}))),o.a.createElement(Ke,{type:"submit"},"Add Role")))}})))))}}]),t}(n.Component),qe={overflowY:"scroll",height:"500px",position:"relative"},Xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).showDrawer=a.showDrawer.bind(Object(h.a)(a)),a.hideDrawer=a.hideDrawer.bind(Object(h.a)(a)),a.sessionDelete=a.sessionDelete.bind(Object(h.a)(a)),a.state={showDrawerEvent:!1,jwtValidity:!0,openLaunchDrawer:!1,roles_list:[],isFetching:!1},a.launchInstanceDrawer=a.launchInstanceDrawer.bind(Object(h.a)(a)),a.closeInstanceDrawer=a.closeInstanceDrawer.bind(Object(h.a)(a)),a.getRoles=a.getRoles.bind(Object(h.a)(a)),a.authenticateToken=a.authenticateToken.bind(Object(h.a)(a)),a.deleteRole=a.deleteRole.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isFetching:!0}),this.authenticateToken().then((function(t){e.getRoles().then((function(t){console.log("got it"),e.setState({isFetching:!1})}))}))}},{key:"deleteRole",value:function(e,t){t.preventDefault(),console.log(e);var a={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},n={projectID:this.state.projectID,role_name:e};return E.a.post("/auth/deleterole",n,a).then((function(e){console.log(e),window.location.reload()})).catch((function(e){console.log(e)}))}},{key:"authenticateToken",value:function(){var e=this,t={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"};return E.a.get("/auth/authenticate",t).then((function(t){e.setState({projectID:t.data.data.projectID,scopedToken:t.data.data.scopedToken})})).catch((function(e){console.log(e)}))}},{key:"getRoles",value:function(e,t){var a=this,n=[],o={headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")},"Content-Type":"application/json"},l={projectID:this.state.projectID};return E.a.post("/auth/getrole",l,o).then((function(e){e.data.data.map((function(e){n.push(e.split("_")[0])})),a.setState({roles_list:n})})).catch((function(e){console.log(e)}))}},{key:"sessionDelete",value:function(){this.setState({jwtValidity:!1})}},{key:"showDrawer",value:function(e){this.setState({showDrawerEvent:!0})}},{key:"hideDrawer",value:function(e){this.setState({showDrawerEvent:!1})}},{key:"launchInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!0})}},{key:"closeInstanceDrawer",value:function(){this.setState({openLaunchDrawer:!1}),window.location.reload()}},{key:"render",value:function(){var e=this;return j()||this.sessionDelete(),o.a.createElement(o.a.Fragment,null,this.state.jwtValidity?o.a.createElement(o.a.Fragment,null,this.state.showDrawerEvent?o.a.createElement(x,{handleHideDrawer:this.hideDrawer}):"",o.a.createElement("div",null,o.a.createElement(b,{dashboardView:!0,showDrawer:this.showDrawer}),o.a.createElement("div",null,o.a.createElement(Je,{drawerOpen:this.state.openLaunchDrawer,closeInstanceDrawer:this.closeInstanceDrawer}),o.a.createElement("div",{style:{padding:"1em",paddingLeft:"10%",paddingRight:"10%"},align:"right"},o.a.createElement(v.b,{onClick:this.launchInstanceDrawer,intent:"success",icon:"crown"},"Add Role"),o.a.createElement("div",{style:{paddingTop:"1em"},align:"left"},o.a.createElement(T.a,{elevation:C.a.TWO},o.a.createElement("h2",null,"Roles"),o.a.createElement("div",{style:qe},this.state.roles_list.map((function(t){return o.a.createElement("div",{key:t,style:{marginBlock:0,paddingTop:".25em",paddingBottom:".25em",paddingLeft:".25em",paddingRight:".25em"}},o.a.createElement(T.a,{interactive:!0,elevation:C.a.ONE},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("strong",null,o.a.createElement("p",null,t)),o.a.createElement(v.b,{value:t,id:t,onClick:function(a){return e.deleteRole(t,a)},intent:"danger",icon:"trash"},"Delete Role"))))}))))))))):o.a.createElement(D.a,{to:"/signin"}))}}]),t}(n.Component);var $e=function(){return o.a.createElement(g.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(D.d,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(D.b,{exact:!0,path:"/",component:w}),o.a.createElement(D.b,{path:"/signin",component:G}),o.a.createElement(D.b,{path:"/signup",component:W}),o.a.createElement(D.b,{path:"/dashboard/overview",component:L}),o.a.createElement(D.b,{path:"/dashboard/instances",component:we}),o.a.createElement(D.b,{path:"/dashboard/identity/users",component:Le}),o.a.createElement(D.b,{path:"/dashboard/identity/roles",component:Xe}),o.a.createElement(D.b,{path:"/dashboard/instance-details/:instanceid",component:fe})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement($e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[109,1,2]]]);
//# sourceMappingURL=main.fe27a2a8.chunk.js.map